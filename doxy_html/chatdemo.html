<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ArnLib: Chat Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ArnLib
   </div>
   <div id="projectbrief">Active Registry Network</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('chatdemo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Chat Demo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Demonstration with a simple chat program. It consists of a server and a client part. After starting the server, any number of clients can be started.</p>
<p>This demo is focused on the Service API (RPC) functionalty of ArnLib. Slots are remotely called from clients to server and the other way back. All is done with standard function calls without any visual serializing.</p>
<p><b>Chat Server</b> <a class="el" href="chatdemo.html#ChatSapi_hpp">ChatSapi.hpp</a>, <a class="el" href="chatdemo.html#ServerMain_hpp">ServerMain.hpp</a>, <a class="el" href="chatdemo.html#ServerMain_cpp">ServerMain.cpp</a>, <a class="el" href="chatdemo.html#s_main_cpp">main.cpp</a></p>
<p><b>Chat Client</b> <a class="el" href="chatdemo.html#MainWindow_hpp">MainWindow.hpp</a>, <a class="el" href="chatdemo.html#MainWindow_cpp">MainWindow.cpp</a>, <a class="el" href="chatdemo.html#c_main_cpp">main.cpp</a></p>
<h1><a class="anchor" id="chatserver"></a>
Chat Server</h1>
<h2><a class="anchor" id="ChatSapi_hpp"></a>
ChatSapi.hpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef CHATSAPI_HPP</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define CHATSAPI_HPP</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnSapi.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>ChatSapi : <span class="keyword">public</span> <a class="code" href="class_arn_sapi.html" title="Service API.">ArnSapi</a></div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> ChatSapi( QObject* parent = 0) : <a class="code" href="class_arn_sapi.html" title="Service API.">ArnSapi</a>( parent)  {}</div>
<div class="line"></div>
<div class="line">signals:</div>
<div class="line"><a class="code" href="_arn_sapi_8hpp.html#a03570a0d36179506ffe4ce9fb442218a">MQ_PUBLIC_ACCESS</a></div>
<div class="line">    <span class="keywordtype">void</span>  pv_list();</div>
<div class="line">    <span class="keywordtype">void</span>  pv_newMsg( QString name, QString msg);</div>
<div class="line">    <span class="keywordtype">void</span>  pv_infoQ();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span>  rq_updateMsg( <span class="keywordtype">int</span> seq, QString name, QString msg);</div>
<div class="line">    <span class="keywordtype">void</span>  rq_info( QString name, QString ver);</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif // CHATSAPI_HPP</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="ServerMain_hpp"></a>
ServerMain.hpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef SERVERMAIN_HPP</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define SERVERMAIN_HPP</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;ChatSapi.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnItem.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnServer.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QTimer&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QStringList&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QObject&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>ServerMain : <span class="keyword">public</span> QObject</div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> ServerMain( QObject* parent = 0);</div>
<div class="line"></div>
<div class="line">signals:</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span> slots:</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span> slots:</div>
<div class="line">    <span class="keywordtype">void</span>  doNewSession( QString path);</div>
<div class="line">    <span class="keywordtype">void</span>  doTimeUpdate();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Chat Provider routines</span></div>
<div class="line">    <span class="keywordtype">void</span>  chatList();</div>
<div class="line">    <span class="keywordtype">void</span>  chatNewMsg( QString name, QString msg);</div>
<div class="line">    <span class="keywordtype">void</span>  chatInfoQ();</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    QStringList  _chatNameList;</div>
<div class="line">    QStringList  _chatMsgList;</div>
<div class="line">    QTimer  _timer;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_arn_item.html" title="Handle for an Arn Data Object.">ArnItem</a>  _arnTime;</div>
<div class="line">    <a class="code" href="class_arn_server.html" title="Class for making an Arn Server.">ArnServer</a>*  _server;</div>
<div class="line">    ChatSapi*  _commonSapi;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif // SERVERMAIN_HPP</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="ServerMain_cpp"></a>
ServerMain.cpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ServerMain.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnItem.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QTime&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">ServerMain::ServerMain( QObject* parent) :</div>
<div class="line">    QObject( parent)</div>
<div class="line">{</div>
<div class="line">    _timer.start(1000);</div>
<div class="line">    connect( &amp;_timer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(doTimeUpdate()));</div>
<div class="line"></div>
<div class="line">    _server = <span class="keyword">new</span> <a class="code" href="class_arn_server.html" title="Class for making an Arn Server.">ArnServer</a>( <a class="code" href="struct_arn_server_1_1_type.html#ae4fba4a82a463c288561b107362dde41abe95db1db12eebabf0398f1eb47a69bb">ArnServer::Type::NetSync</a>, <span class="keyword">this</span>);</div>
<div class="line">    _server-&gt;start();</div>
<div class="line"></div>
<div class="line">    _arnTime.open(<span class="stringliteral">&quot;//Chat/Time/value&quot;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    _commonSapi = <span class="keyword">new</span> ChatSapi( <span class="keyword">this</span>);</div>
<div class="line">    _commonSapi-&gt;open(<span class="stringliteral">&quot;//Chat/Pipes/pipeCommon!&quot;</span>, <a class="code" href="struct_arn_rpc_1_1_mode.html#ae20fe345c26e14c3805658cc52793c57a90ec424cb525bbcce0c60a666bb1c4d4" title="Provider side (opposed to requester)">ArnSapi::Mode::Provider</a>);</div>
<div class="line">    _commonSapi-&gt;batchConnect( QRegExp(<span class="stringliteral">&quot;^pv_(.+)&quot;</span>), <span class="keyword">this</span>, <span class="stringliteral">&quot;chat\\1&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_arn_item.html" title="Handle for an Arn Data Object.">ArnItem</a>*  arnPipes = <span class="keyword">new</span> <a class="code" href="class_arn_item.html" title="Handle for an Arn Data Object.">ArnItem</a>(<span class="stringliteral">&quot;//Chat/Pipes/&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line">    connect( arnPipes, SIGNAL(arnItemCreated(QString)), <span class="keyword">this</span>, SLOT(doNewSession(QString)));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  ServerMain::doNewSession( QString path)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="class_arn_m.html#a309011deedd9b73151d82ed9b1e9ac06" title="Test if path is a provider path">ArnM::isProviderPath</a>( path))  <span class="keywordflow">return</span>;  <span class="comment">// Only provider pipe is used</span></div>
<div class="line"></div>
<div class="line">    ChatSapi*  soleSapi = <span class="keyword">new</span> ChatSapi( <span class="keyword">this</span>);</div>
<div class="line">    soleSapi-&gt;open( path, <a class="code" href="struct_arn_rpc_1_1_mode.html#ae20fe345c26e14c3805658cc52793c57a90ec424cb525bbcce0c60a666bb1c4d4" title="Provider side (opposed to requester)">ArnSapi::Mode::Provider</a>);</div>
<div class="line">    soleSapi-&gt;batchConnect( QRegExp(<span class="stringliteral">&quot;^pv_(.+)&quot;</span>), <span class="keyword">this</span>, <span class="stringliteral">&quot;chat\\1&quot;</span>);</div>
<div class="line">    connect( soleSapi, SIGNAL(pipeClosed()), soleSapi, SLOT(deleteLater()));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  ServerMain::doTimeUpdate()</div>
<div class="line">{</div>
<div class="line">    _arnTime = QTime::currentTime().toString();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  ServerMain::chatList()</div>
<div class="line">{</div>
<div class="line">    ChatSapi*  sapi = qobject_cast&lt;ChatSapi*&gt;( sender());</div>
<div class="line">    Q_ASSERT(sapi);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _chatNameList.size(); ++i) {</div>
<div class="line">        sapi-&gt;rq_updateMsg( i, _chatNameList.at(i), _chatMsgList.at(i));</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  ServerMain::chatNewMsg( QString name, QString msg)</div>
<div class="line">{</div>
<div class="line">    _chatNameList += name;</div>
<div class="line">    _chatMsgList  += msg;</div>
<div class="line">    <span class="keywordtype">int</span>  seq = _chatNameList.size() - 1;</div>
<div class="line"></div>
<div class="line">    _commonSapi-&gt;rq_updateMsg( seq, name, msg);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  ServerMain::chatInfoQ()</div>
<div class="line">{</div>
<div class="line">    ChatSapi*  sapi = qobject_cast&lt;ChatSapi*&gt;( sender());</div>
<div class="line">    Q_ASSERT(sapi);</div>
<div class="line">    sapi-&gt;rq_info(<span class="stringliteral">&quot;Arn Chat Demo&quot;</span>, <span class="stringliteral">&quot;1.0&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="s_main_cpp"></a>
main.cpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ServerMain.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QApplication a(argc, argv, <span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">    qDebug() &lt;&lt; <span class="stringliteral">&quot;Startar Arn Chat Server ...&quot;</span>;</div>
<div class="line">    <span class="keyword">new</span> ServerMain;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="chatclient"></a>
Chat Client</h1>
<h2><a class="anchor" id="MainWindow_hpp"></a>
MainWindow.hpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef MAINWINDOW_HPP</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MAINWINDOW_HPP</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;../ArnDemoChatServer/ChatSapi.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnClient.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ArnLib/ArnItem.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QMainWindow&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QVector&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>Ui {</div>
<div class="line"><span class="keyword">class </span>MainWindow;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>MainWindow : <span class="keyword">public</span> QMainWindow</div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line">    </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> MainWindow(QWidget *parent = 0);</div>
<div class="line">    ~MainWindow();</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span> slots:</div>
<div class="line">    <span class="keywordtype">void</span>  doSendLine();</div>
<div class="line">    <span class="keywordtype">void</span>  doTimeUpdate( QString timeStr);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Chat Requester routines</span></div>
<div class="line">    <span class="keywordtype">void</span>  chatUpdateMsg( <span class="keywordtype">int</span> seq, QString name, QString msg);</div>
<div class="line">    <span class="keywordtype">void</span>  chatInfo( QString name, QString ver);</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    Ui::MainWindow *_ui;</div>
<div class="line">    QVector&lt;QString&gt;  _chatNameList;</div>
<div class="line">    QVector&lt;QString&gt;  _chatMsgList;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_arn_client.html" title="Class for connecting to an Arn Server.">ArnClient</a>  _arnClient;</div>
<div class="line">    ChatSapi  _commonSapi;</div>
<div class="line">    ChatSapi  _soleSapi;</div>
<div class="line">    <a class="code" href="class_arn_item.html" title="Handle for an Arn Data Object.">ArnItem</a>  _arnTime;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif // MAINWINDOW_HPP</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="MainWindow_cpp"></a>
MainWindow.cpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;MainWindow.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;tmp/ui_MainWindow.h&quot;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">MainWindow::MainWindow( QWidget* parent) :</div>
<div class="line">    QMainWindow( parent),</div>
<div class="line">    _ui( new Ui::MainWindow)</div>
<div class="line">{</div>
<div class="line">    _ui-&gt;setupUi( <span class="keyword">this</span>);</div>
<div class="line">    _ui-&gt;userEdit-&gt;setFocus();</div>
<div class="line">    connect( _ui-&gt;lineEdit, SIGNAL(returnPressed()), <span class="keyword">this</span>, SLOT(doSendLine()));</div>
<div class="line"></div>
<div class="line">    _arnClient.connectToArn(<span class="stringliteral">&quot;localhost&quot;</span>);</div>
<div class="line">    _arnClient.setMountPoint(<span class="stringliteral">&quot;//&quot;</span>);</div>
<div class="line"></div>
<div class="line">    _arnTime.open(<span class="stringliteral">&quot;//Chat/Time/value&quot;</span>);</div>
<div class="line">    connect( &amp;_arnTime, SIGNAL(changed(QString)), <span class="keyword">this</span>, SLOT(doTimeUpdate(QString)));</div>
<div class="line"></div>
<div class="line">    _commonSapi.open(<span class="stringliteral">&quot;//Chat/Pipes/pipeCommon&quot;</span>);</div>
<div class="line">    _commonSapi.batchConnect( QRegExp(<span class="stringliteral">&quot;^rq_(.+)&quot;</span>), <span class="keyword">this</span>, <span class="stringliteral">&quot;chat\\1&quot;</span>);</div>
<div class="line"></div>
<div class="line">    _soleSapi.open(<span class="stringliteral">&quot;//Chat/Pipes/pipe&quot;</span>, <a class="code" href="struct_arn_rpc_1_1_mode.html#ae20fe345c26e14c3805658cc52793c57acf07d732ddd9af3b3ae07bb277c4aca0" title="Convenience, combined UuidPipe and AutoDestroy">ArnSapi::Mode::UuidAutoDestroy</a>);</div>
<div class="line">    _soleSapi.batchConnect( QRegExp(<span class="stringliteral">&quot;^rq_(.+)&quot;</span>), <span class="keyword">this</span>, <span class="stringliteral">&quot;chat\\1&quot;</span>);</div>
<div class="line"></div>
<div class="line">    _soleSapi.pv_infoQ();</div>
<div class="line">    _soleSapi.pv_list();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">MainWindow::~MainWindow()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">delete</span> _ui;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  MainWindow::doTimeUpdate( QString timeStr)</div>
<div class="line">{</div>
<div class="line">    _ui-&gt;timeEdit-&gt;setTime( QTime::fromString( timeStr));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  MainWindow::doSendLine()</div>
<div class="line">{</div>
<div class="line">    QString  myName = _ui-&gt;userEdit-&gt;text();</div>
<div class="line">    QString  line   = _ui-&gt;lineEdit-&gt;text();</div>
<div class="line">    _ui-&gt;lineEdit-&gt;clear();</div>
<div class="line"></div>
<div class="line">    _soleSapi.pv_newMsg( myName, line);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  MainWindow::chatUpdateMsg( <span class="keywordtype">int</span> seq, QString name, QString msg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (seq &gt;= _chatNameList.size()) {</div>
<div class="line">        _chatNameList.resize( seq + 1);</div>
<div class="line">        _chatMsgList.resize(  seq + 1);</div>
<div class="line">    }</div>
<div class="line">    _chatNameList[ seq] = name;</div>
<div class="line">    _chatMsgList[  seq] = msg;</div>
<div class="line"></div>
<div class="line">    QString  text;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _chatNameList.size(); ++i) {</div>
<div class="line">        text += _chatNameList.at(i) + <span class="stringliteral">&quot;:  &quot;</span> + _chatMsgList.at(i) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    _ui-&gt;textEdit-&gt;setText( text);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  MainWindow::chatInfo( QString name, QString ver)</div>
<div class="line">{</div>
<div class="line">    _ui-&gt;appNameLabel-&gt;setText( name);</div>
<div class="line">    _ui-&gt;verLabel-&gt;setText( ver);</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="c_main_cpp"></a>
main.cpp</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;MainWindow.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QApplication a(argc, argv);</div>
<div class="line">    MainWindow w;</div>
<div class="line">    w.show();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="pic"></a>
Pictures</h1>
<div class="image">
<img src="Arn_chat_demo_1.png" alt="Arn_chat_demo_1.png"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="exampleindex.html">Example Collection</a></li>
    <li class="footer">Generated on Mon Mar 18 2013 00:34:20 for ArnLib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
